# Проверка настройки Telegram

## Шаг 1: Проверь .env файл

Открой файл `.env` в корне проекта. Он должен выглядеть так:

```env
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=123456789
SCHOOL_EMAIL=info@school.ru
```

**Важно:**
- Токен должен быть в формате: `число:буквы_и_цифры`
- Chat ID - это просто число (может быть отрицательным для групп)
- Никаких пробелов, кавычек или других символов!

## Шаг 2: Перезапусти сервер

После изменения `.env` ОБЯЗАТЕЛЬНО перезапусти:

```bash
# Останови сервер (Ctrl+C в терминале)
# Затем запусти снова:
npm run dev
```

## Шаг 3: Проверь логи

После перезапуска сервера, попробуй отправить форму и смотри:

### В терминале (где запущен npm run dev):
Должно появиться:
```
Проверка токенов: { hasToken: true, hasChatId: true, ... }
Отправка в Telegram...
Telegram ответ: { ok: true, ... }
```

### В консоли браузера (F12):
Должно появиться:
```
Отправка формы...
Статус ответа: 200
Ответ сервера: { success: true, ... }
```

## Частые проблемы

### 1. "Telegram не настроен"
- Проверь, что `.env` файл в корне проекта (рядом с package.json)
- Перезапусти сервер
- Проверь, что нет опечаток в названиях переменных

### 2. "Unauthorized" или 401
- Неправильный токен бота
- Создай нового бота через @BotFather и получи новый токен

### 3. "Bad Request: chat not found"
- Неправильный Chat ID
- Убедись, что отправил боту хотя бы одно сообщение (нажал Start)
- Получи Chat ID заново через @userinfobot

### 4. Запрос идет на localhost
- Это ПРАВИЛЬНО! `/api/contact` - это относительный путь
- Nuxt автоматически обрабатывает его как `http://localhost:3000/api/contact`
- Сервер сам делает запрос к Telegram API

## Тестирование токена вручную

Открой в браузере (замени токен и chat_id):
```
https://api.telegram.org/bot<ТВОЙ_ТОКЕН>/sendMessage?chat_id=<ТВОЙ_CHAT_ID>&text=test
```

Если увидишь `{"ok":true,...}` - токены правильные!
